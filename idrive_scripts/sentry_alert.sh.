#!/bin/bash
# 12D Sentry: Automated Reliability Check

# 1. Search for 'Success' in the latest IDrive logs
LOG_RESULT=$(/opt/IDriveForLinux/bin/idrive --view-log | grep -i "Success" | tail -n 1)

if [[ -z "$LOG_RESULT" ]]; then
    echo "ALERT: 12D Heartbeat not detected. Investigating alignment..."
    echo "$(date): ALERT - Backup failed or did not run." >> ~/arcana-ecosystem/idrive_scripts/infrastructure.md
else
    echo "CONFIRMED: $LOG_RESULT"
    echo "$(date): SUCCESS - 12D Heartbeat confirmed." >> ~/arcana-ecosystem/idrive_scripts/infrastructure.md
fi
